적합한 인터페이스가 존재한다면 매개변수 뿐 아니라, 반환값, 필드, 변수를 모두 인터페이스 타입으로 선언하자.

객체의 실제 클래스를 사용해야할 경우는 오직 생성자를 사용할 때 뿐이다.

# 인터페이스로 참조를 하게 되면 구현 클래스를 교체할 수 있다.

인터페이스로 참조를 하게 되면 런타임 시 구현 클래스를 교체할 수 있으므로 유연한 코드를 작성할 수 있다.

하지만 주변 코드가 구현 클래스의 특별한 기능에 의존한다면 구현 클래스를 교체하면 안된다.

예를 들어, 주변 코드가 LinkedHashSet 클래스의 순서에 의존하여 작성되어 있었다면 HashSet으로 변경하면 안된다.

---

# 적합한 인터페이스가 없는 3가지 경우

## 값 클래스

String과 BigInteger와 같은 값 클래스는 여러 가지 값 클래스를 구현할 수 있다고 설계하지 않는다. 그러므로 final 클래스인 경우가 많고, 적합한 인터페이스가 존재하는 경우가 드물다.

---

## 클래스 기반으로 작성된 프레임워크가 제공하는 객체

클래스 기반으로 작성된 프레임워크가 제공하는 객체는 적합한 인터페이스가 없다. 하지만 이런 경우라도 사용할 클래스를 만족하는 상위 클래스(대개 추상클래스)로 참조하는 것이 좋다.

OutputStream, java.io 패키지에 있는 클래스들이 이런 경우에 해당한다.

---

## 인터페이스에 없는 기능을 사용해야할 경우

인터페이스에는 없고 구체 클래스에만 존재하는 메서드를 사용해야할 경우가 있다. 이럴 경우는 구체 클래스로 참조를 해야한다.

예를 들어, PriorityQueue 클래스가 제공하는 comparator 메서드는 Queue 인터페이스에서 제공하지 않는다. 이때 comparator 메서드를 사용해야 한다면 PriorityQueue 타입으로 참조하는 방법밖엔 없다.

---

위의 세 상황이 적합한 인터페이스가 없는 모든 경우는 아니다.

상황에 따라 다를 수 있으므로 신중히 판단해야 한다.

하지만 적합한 인터페이스가 없다면 사용할 구체 클래스의 기능을 만족할 상위 클래스로 참조를 하자.
